<!-- Стили Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<body style="padding: 20px;">
	<!-- Контейнер Bootstrap -->
	<div class="container" style="display: flex; justify-content: center; flex-direction: column; max-width: 400px; gap: 10px">

		<!-- Поле ввода последовательности  -->
		<textarea type="text" id="str_input" class="form-control"></textarea>

		<!-- Поле ввода длины палиндрома -->
		<input type="number" value="" id="length_input" class="form-control" />

		<!-- Кнопка поиска -->
		<input type="button" value="Найти" id="find_btn" class="btn btn-primary" />

		<!-- Блок вывода результата -->
		<div id="result"></div>
	</div>
</body>

<!-- Адаптив JavaScript Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
	// Функция поиска палиндромов в строке
	function findPalindromes(str, length) {
		const result = []
		// перебирает все возможные центры палиндромов
		for (let i = 0; i < str.length; i++) {
			// odd - поиск палиндромов нечетной длины
			{
				// пока симметричные символы совпадают и не вышли за границы строки
				// сравниваем символы слева и справа
				// проверяем длину
				// увеличиваем радиус палиндрома
				// если нашли палиндром нужной длины сохраняем индексы начала и конец
				let d = 1
				while (i - d >= 0 && i + d < str.length
					&& str[i - d] == str[i + d]
					&& d * 2 + 1 <= length
				)
					d++
				if (--d > 0 && d * 2 + 1 == length)
					result.push([i - d, i + d + 1])
			}
			// even - поиск палиндромов четной длины
			{
				// для четных палиндромов центр между символами
				let d = 1
				while (i - d >= 0 && i + d - 1 < str.length
					&& str[i - d] == str[i + d - 1]
					&& d * 2 <= length
				)
					d++
				if (--d > 0 && d * 2 == length)
					result.push([i - d, i + d])
			}
		}
		return result
	}

	const input = document.getElementById("str_input")

	// поле для ввода палиндрома
	input.validate = function () {
		if (this.value.trim()) { // пуста ли строка
			this.classList.remove("is-invalid") // убирает красную обводку
			return true
		}
		this.classList.add("is-invalid") // добавляет красную обводку
		return false
	}

	// поле для ввода длины палиндрома
	const lengthInput = document.getElementById("length_input")
	lengthInput.validate = function () {
		console.log('validate lengthInput')
		if (Number(this.value) > 1) { // длина должна быть больше 1
			this.classList.remove("is-invalid")
			return true
		}

		this.classList.add("is-invalid")
		return false
	}

	const button = document.getElementById("find_btn")
	const result = document.getElementById("result")


	// проверка нескольких полей
	function validate(inputs) {
		return inputs.reduce((flag, input) => {
			if (input.validate === undefined)
				return flag
			return input.validate()
		}, true)
	}

	// обработчик клика по кнопке, проверяет два поля
	button.addEventListener('click', function () {
		if (!validate([input, lengthInput]))
			return // валидация не прошла - выходим

		// получает значения
		const s = input.value
		const r = findPalindromes(s, Number(lengthInput.value))

		// вывод результата, преобразование диапазонов в подстроки
		result.innerHTML = r.map(range => s.slice(...range)).join(", ")
	});
</script>

<style>
</style>